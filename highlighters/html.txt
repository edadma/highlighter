highlighter
  name: HTML
options
  regex: dotall ignorecase
templates
  default: << <span class="\class">\escape\text</span> >>
  layout: << \delim \ [ ]
    \set entity [rgb(104, 175, 133)]
    \set tag [rgb(107, 168, 175)]
    \set string [rgb(207, 96, 54)]
    \set lum 15
    <html>
        <head>
            <title>HTML highlighting example</title>
            <style>
                .highlight .hll { background-color: rgb(16, 9, 14); }
                .highlight  { background: #272822; color: rgb(165, 119, 152); }
                .highlight .entitydelim { color: \lighten\lum\entity; }
                .highlight .entity { color: \entity; }
                .highlight .preproc { color: #75715e }
                .highlight .comment { color: rgb(69, 64, 61); }
                .highlight .tagdelim { color: \lighten\lum\tag; }
                .highlight .tag { color: \tag; }
                .highlight .attr { color: rgb(228, 63, 193); }
                .highlight .oper { color: rgb(238, 171, 106); }
                .highlight .stringdelim { color: \lighten\lum\string; }
                .highlight .string { color: \string; }
            </style>
        </head>
        <body>
            <div class="highlight"><pre>\content</pre></div>
        </body>
    </html>
    >>
states
  root:
    (&)(\S*?)(;)                 => (entitydelim entity entitydelim)
    \<\!\[CDATA\[.*?\]\]\>       => preproc
    <!--                         => comment >comment
    <\?.*?\?>                    => preproc
    <![^>]*>                     => preproc
    (<)\s*(script)\s*            => (tagdelim tag) >script-content >tag
    (<)\s*(style)\s*             => (tagdelim tag) >style-content >tag
    (<)\s*([\w:.-]+)             => (tagdelim tag) >tag
    (<)\s*(/)\s*([\w:.-]+)\s*(>) => (tagdelim tagdelim tag tagdelim)
  comment:
    [^-]+ => comment
    -->   => comment ^
    -     => comment
  tag:
    ([\w:-]+)\s*(=)\s* => (attr oper) >attr
    [\w:-]+            => attr
    (/?)\s*(>)         => (tagdelim tagdelim) ^
  script-content:
    (<)\s*(/)\s*(script)\s*(>) => (tagdelim tagdelim tag tagdelim) ^
    .+?(?=<\s*/\s*script\s*>)  => javascript
  style-content:
    (<)\s*(/)\s*(style)\s*(>) => (tagdelim tagdelim tag tagdelim) ^
    .+?(?=<\s*/\s*style\s*>)  => css
  attr:
    (")(.*?)(")   => (stringdelim string stringdelim) ^
    (')(.*?)(')   => (stringdelim string stringdelim) ^
    [^\s>]+ => string ^
